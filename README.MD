### README.md

# Asyky FMM

Это простой микросервис для управления файлами и их хешами, который использует базу данных SQLite. 
С его помощью вы можете создавать списки файлов (по сути, это таблицы в базе данных), 
добавлять в них файлы, перемещать файлы между списками, 
удалять файлы и даже полностью удалять списки. 
Все взаимодействие происходит через HTTP API.

Нужен был изначально для AsykyLauncher.

### Что умеет этот микросервис?

- Создавать списки (таблицы) для хранения файлов и их хешей.
- Добавлять файлы в списки.
- Удалять файлы из списков.
- Перемещать файлы из одного списка в другой.
- Удалять целый список целиком.
- Получать список файлов в конкретном списке.

### Как начать?

#### 1. Клонируем проект
#### 2. Устанавливаем зависимости Go:

```bash
go mod tidy
```

#### 3. Настраиваем переменные окружения:

- Переменная `SECRET_KEY` — это ключ для защиты API, так что только те, кто его знает, смогут добавлять, удалять и изменять данные.

```bash
export SECRET_KEY="your_secret_key"
```

- По умолчанию сервер запускается на порту `8080`. Если хотите изменить порт, установите переменную `PORT`:

```bash
export PORT=9090
```

#### 4. Запускаем сервер:

```bash
go run main.go
```

База данных будет хранится в `files.db` и если её сейчас не существует - она будет создана при первом запуске автоматически, если её нет.

### Использование API

Теперь, когда сервер запущен, вы можете работать с ним через HTTP-запросы.

Все маршруты описаны в спецификации OpenAPI — загляните в файл `routes.yml` для полного списка всех маршрутов и их параметров. 
Вы также можете использовать инструменты вроде Swagger для визуализации и тестирования API на основе этого файла.

### Примеры запросов

Вот несколько примеров для работы с микросервисом:

#### 1. Создание списка файлов (таблицы)

```bash
curl -X POST "http://localhost:8080/verify/create_list?type=mods&secret_key=your_secret_key"
```

#### 2. Получение списка файлов

```bash
curl -X GET "http://localhost:8080/verify/list?type=mods"
```

#### 3. Добавление файла в список

```bash
curl -X POST "http://localhost:8080/verify/add?type=mods&secret_key=your_secret_key" \
-H "Content-Type: application/json" \
-d '{"name": "myfile.txt", "hash": "abc123"}'
```

#### 4. Удаление файла из списка

```bash
curl -X DELETE "http://localhost:8080/verify/remove?type=mods&name=myfile.txt&secret_key=your_secret_key"
```

#### 5. Удаление списка целиком

```bash
curl -X DELETE "http://localhost:8080/verify/remove_list?type=mods&secret_key=your_secret_key"
```

#### 6. Перемещение файла между списками

```bash
curl -X PUT "http://localhost:8080/verify/move?from=mods&to=resource_packs&name=myfile.txt&secret_key=your_secret_key"
```